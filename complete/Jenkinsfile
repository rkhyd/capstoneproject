pipeline {
  agent none
    stages {
      stage('Build jar file using maven docker image') {
        agent { docker { image 'maven:3.3.3' } }
        steps {
          dir ("complete") {
            sh './mvnw package' 
            sh 'echo "Build Completed..."'
          }
        }
      }
      stage('Run tests and build docker image') {
        agent none
        steps {
          dir ("complete") {
            sh './run.sh'
            sh 'echo "Tests completed and Docker image built..."'
          }
        }
      }
    }
 }
